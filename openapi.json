{
  "openapi": "3.0.0",
  "paths": {
    "/auth/register": {
      "post": {
        "description": "Creates a new account, generates an OTP code for email verification, sends welcome and verification emails, and returns a ticket for completing email verification",
        "operationId": "AuthController_register",
        "parameters": [],
        "requestBody": {
          "required": true,
          "description": "Registration payload",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterUserDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User successfully registered",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/SuccessResponseApiModel"
                    },
                    {
                      "properties": {
                        "status": {
                          "type": "string",
                          "default": "success"
                        },
                        "data": {
                          "$ref": "#/components/schemas/OtpTicketApiModel"
                        }
                      },
                      "required": [
                        "status",
                        "data"
                      ]
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ErrorResponseApiModel"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "error"
                          ],
                          "default": "error"
                        },
                        "error": {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "default": "validation"
                            },
                            "message": {
                              "type": "string",
                              "default": "Validation failed."
                            },
                            "statusCode": {
                              "type": "number",
                              "default": 400
                            },
                            "details": {
                              "$ref": "#/components/schemas/AuthValidationDetailsApiModel"
                            }
                          }
                        }
                      },
                      "required": [
                        "status",
                        "error"
                      ]
                    }
                  ]
                }
              }
            }
          },
          "409": {
            "description": "User email is already taken",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ErrorResponseApiModel"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "error"
                          ],
                          "default": "error"
                        },
                        "error": {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "default": "conflict"
                            },
                            "message": {
                              "type": "string",
                              "default": "Conflict."
                            },
                            "statusCode": {
                              "type": "number",
                              "default": 409
                            },
                            "details": {
                              "type": "object",
                              "properties": {
                                "reason": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "reason"
                              ],
                              "example": {
                                "reason": "This email address is already taken."
                              }
                            }
                          }
                        }
                      },
                      "required": [
                        "status",
                        "error"
                      ]
                    }
                  ]
                }
              }
            }
          },
          "500": {
            "description": "Some mail could not be sent",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ErrorResponseApiModel"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "error"
                          ],
                          "default": "error"
                        },
                        "error": {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "default": "internal"
                            },
                            "message": {
                              "type": "string",
                              "default": "Internal server error."
                            },
                            "statusCode": {
                              "type": "number",
                              "default": 500
                            },
                            "details": {
                              "type": "object",
                              "properties": {
                                "reason": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "reason"
                              ],
                              "example": {
                                "reason": "The welcome mail could not be sent."
                              }
                            }
                          }
                        }
                      },
                      "required": [
                        "status",
                        "error"
                      ]
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "Register a new user",
        "tags": [
          "Auth flow"
        ]
      }
    },
    "/auth/login": {
      "post": {
        "description": "Authenticates user by email and password and returns an access token (JWT)",
        "operationId": "AuthController_login",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginUserDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User successfully registered",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/SuccessResponseApiModel"
                    },
                    {
                      "properties": {
                        "status": {
                          "type": "string",
                          "default": "success"
                        },
                        "data": {
                          "$ref": "#/components/schemas/AccessTokenApiModel"
                        }
                      },
                      "required": [
                        "status",
                        "data"
                      ]
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Validation failed",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ErrorResponseApiModel"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "error"
                          ],
                          "default": "error"
                        },
                        "error": {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "default": "validation"
                            },
                            "message": {
                              "type": "string",
                              "default": "Validation failed."
                            },
                            "statusCode": {
                              "type": "number",
                              "default": 400
                            },
                            "details": {
                              "$ref": "#/components/schemas/AuthValidationDetailsApiModel"
                            }
                          }
                        }
                      },
                      "required": [
                        "status",
                        "error"
                      ]
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ErrorResponseApiModel"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "error"
                          ],
                          "default": "error"
                        },
                        "error": {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "default": "access-control.authentication.credentials"
                            },
                            "message": {
                              "type": "string",
                              "default": "Authentication failed."
                            },
                            "statusCode": {
                              "type": "number",
                              "default": 401
                            },
                            "details": {
                              "type": "object",
                              "properties": {
                                "reason": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "reason"
                              ],
                              "example": {
                                "reason": "Invalid credentials."
                              }
                            }
                          }
                        }
                      },
                      "required": [
                        "status",
                        "error"
                      ]
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "User status policy failed",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ErrorResponseApiModel"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "error"
                          ],
                          "default": "error"
                        },
                        "error": {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "enum": [
                                "access-control.authorization.blocked",
                                "access-control.authorization.forbidden"
                              ]
                            },
                            "message": {
                              "type": "string",
                              "default": "Forbidden."
                            },
                            "statusCode": {
                              "type": "number",
                              "enum": [
                                403
                              ]
                            },
                            "details": {
                              "oneOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "reason": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "reason"
                                  ]
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "reason": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "reason"
                                  ]
                                }
                              ]
                            }
                          },
                          "required": [
                            "type",
                            "statusCode"
                          ]
                        }
                      },
                      "required": [
                        "status",
                        "error"
                      ]
                    }
                  ]
                },
                "examples": {
                  "access-control.authorization.blocked_1": {
                    "summary": "User account is blocked",
                    "value": {
                      "status": "error",
                      "error": {
                        "type": "access-control.authorization.blocked",
                        "message": "Authorization failed",
                        "statusCode": 403,
                        "details": {
                          "reason": "Your account has been blocked. Please contact support."
                        }
                      }
                    }
                  },
                  "access-control.authorization.forbidden_2": {
                    "summary": "Forbidden resource (fallback)",
                    "value": {
                      "status": "error",
                      "error": {
                        "type": "access-control.authorization.forbidden",
                        "message": "Authorization failed",
                        "statusCode": 403,
                        "details": {
                          "reason": "Access denied. Please contact support."
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "summary": "Log in with credentials",
        "tags": [
          "Auth flow"
        ]
      }
    },
    "/auth/logout": {
      "post": {
        "description": "Invalidates the current refresh token (server-side)",
        "operationId": "AuthController_logout",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Logged out and refresh token invalidated",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/SuccessResponseApiModel"
                    },
                    {
                      "properties": {
                        "status": {
                          "type": "string",
                          "default": "success"
                        },
                        "data": {
                          "default": null
                        }
                      },
                      "required": [
                        "status",
                        "data"
                      ]
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "Log out",
        "tags": [
          "Auth flow"
        ]
      }
    },
    "/auth/refresh": {
      "post": {
        "description": "Refresh access and refresh tokens. Returns a new access token",
        "operationId": "AuthController_refresh",
        "parameters": [],
        "responses": {
          "200": {
            "description": "New access and refresh tokens",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/SuccessResponseApiModel"
                    },
                    {
                      "properties": {
                        "status": {
                          "type": "string",
                          "default": "success"
                        },
                        "data": {
                          "$ref": "#/components/schemas/AccessTokenApiModel"
                        }
                      },
                      "required": [
                        "status",
                        "data"
                      ]
                    }
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Refresh token missing, expired, or invalid",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ErrorResponseApiModel"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "error"
                          ],
                          "default": "error"
                        },
                        "error": {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "enum": [
                                "access-control.authentication.refresh-token-not-found",
                                "access-control.authentication.refresh-token-expired",
                                "access-control.authentication.refresh-token-invalid"
                              ]
                            },
                            "message": {
                              "type": "string",
                              "default": "Unauthorized."
                            },
                            "statusCode": {
                              "type": "number",
                              "enum": [
                                401
                              ]
                            },
                            "details": {
                              "oneOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "reason": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "reason"
                                  ]
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "reason": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "reason"
                                  ]
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "reason": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "reason"
                                  ]
                                }
                              ]
                            }
                          },
                          "required": [
                            "type",
                            "statusCode"
                          ]
                        }
                      },
                      "required": [
                        "status",
                        "error"
                      ]
                    }
                  ]
                },
                "examples": {
                  "access-control.authentication.refresh-token-not-found_1": {
                    "summary": "Refresh token missing",
                    "value": {
                      "status": "error",
                      "error": {
                        "type": "access-control.authentication.refresh-token-not-found",
                        "message": "Authentication failed.",
                        "statusCode": 401,
                        "details": {
                          "reason": "Refresh token does not exist."
                        }
                      }
                    }
                  },
                  "access-control.authentication.refresh-token-expired_2": {
                    "summary": "Refresh token is expired",
                    "value": {
                      "status": "error",
                      "error": {
                        "type": "access-control.authentication.refresh-token-expired",
                        "message": "Authentication failed.",
                        "statusCode": 401,
                        "details": {
                          "reason": "Refresh token is expired."
                        }
                      }
                    }
                  },
                  "access-control.authentication.refresh-token-invalid_3": {
                    "summary": "Invalid refresh token",
                    "value": {
                      "status": "error",
                      "error": {
                        "type": "access-control.authentication.refresh-token-invalid",
                        "message": "Authentication failed.",
                        "statusCode": 401,
                        "details": {
                          "reason": "Invalid refresh token."
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "User status policy failed",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ErrorResponseApiModel"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "error"
                          ],
                          "default": "error"
                        },
                        "error": {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "enum": [
                                "access-control.authorization.blocked",
                                "access-control.authorization.forbidden"
                              ]
                            },
                            "message": {
                              "type": "string",
                              "default": "Forbidden."
                            },
                            "statusCode": {
                              "type": "number",
                              "enum": [
                                403
                              ]
                            },
                            "details": {
                              "oneOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "reason": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "reason"
                                  ]
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "reason": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "reason"
                                  ]
                                }
                              ]
                            }
                          },
                          "required": [
                            "type",
                            "statusCode"
                          ]
                        }
                      },
                      "required": [
                        "status",
                        "error"
                      ]
                    }
                  ]
                },
                "examples": {
                  "access-control.authorization.blocked_1": {
                    "summary": "User account is blocked",
                    "value": {
                      "status": "error",
                      "error": {
                        "type": "access-control.authorization.blocked",
                        "message": "Authorization failed",
                        "statusCode": 403,
                        "details": {
                          "reason": "Your account has been blocked. Please contact support."
                        }
                      }
                    }
                  },
                  "access-control.authorization.forbidden_2": {
                    "summary": "Forbidden resource (fallback)",
                    "value": {
                      "status": "error",
                      "error": {
                        "type": "access-control.authorization.forbidden",
                        "message": "Authorization failed",
                        "statusCode": 403,
                        "details": {
                          "reason": "Access denied. Please contact support."
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "User not found by token",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ErrorResponseApiModel"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "error"
                          ],
                          "default": "error"
                        },
                        "error": {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "default": "app.entity-not-found"
                            },
                            "message": {
                              "type": "string",
                              "default": "Entity not found."
                            },
                            "statusCode": {
                              "type": "number",
                              "default": 404
                            },
                            "details": {
                              "type": "object",
                              "properties": {
                                "entityType": {
                                  "type": "string"
                                },
                                "identity": {
                                  "type": "object",
                                  "additionalProperties": {
                                    "nullable": true,
                                    "oneOf": [
                                      {
                                        "type": "object",
                                        "title": "Object",
                                        "description": "Any JSON",
                                        "additionalProperties": true
                                      },
                                      {
                                        "type": "array",
                                        "items": {},
                                        "title": "Array",
                                        "description": "Any array"
                                      },
                                      {
                                        "type": "string",
                                        "title": "String",
                                        "description": "Any string"
                                      },
                                      {
                                        "type": "number",
                                        "title": "Number",
                                        "description": "Any number"
                                      },
                                      {
                                        "type": "boolean",
                                        "title": "String",
                                        "description": "True or false"
                                      }
                                    ]
                                  }
                                }
                              },
                              "required": [
                                "entityType"
                              ],
                              "example": {
                                "entityType": "User",
                                "identity": {
                                  "id": "6wvHiPEGR5X3wTPtTkjEhS"
                                }
                              }
                            }
                          }
                        }
                      },
                      "required": [
                        "status",
                        "error"
                      ]
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "Refresh tokens",
        "tags": [
          "Auth flow"
        ]
      }
    },
    "/auth/password/reset": {
      "post": {
        "operationId": "PasswordManagementController_resetPassword",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ResetPasswordDto"
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": ""
          }
        },
        "tags": [
          "Password management"
        ]
      }
    },
    "/auth/password/reset/confirm": {
      "post": {
        "operationId": "PasswordManagementController_confirmResetPassword",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConfirmOtpCodeDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "Password management"
        ]
      }
    },
    "/auth/password/reset/complete": {
      "post": {
        "operationId": "PasswordManagementController_completeResetPassword",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ResetPasswordCompleteDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "Password management"
        ]
      }
    },
    "/auth/password/set": {
      "post": {
        "operationId": "PasswordManagementController_setPassword",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SetPasswordDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "Password management"
        ]
      }
    },
    "/auth/password/change": {
      "post": {
        "operationId": "PasswordManagementController_changePassword",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePasswordDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": ""
          }
        },
        "tags": [
          "Password management"
        ]
      }
    },
    "/auth/email/verification/request": {
      "post": {
        "description": "Request mail with OTP code for confirmation email",
        "operationId": "EmailVerificationController_sendVerificationMail",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendVerificationMailDto"
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Confirmation email mail has been successfully sent",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/SuccessResponseApiModel"
                    },
                    {
                      "properties": {
                        "status": {
                          "type": "string",
                          "default": "success"
                        },
                        "data": {
                          "$ref": "#/components/schemas/OtpTicketApiModel"
                        }
                      },
                      "required": [
                        "status",
                        "data"
                      ]
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "User have already confirmed email address.",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ErrorResponseApiModel"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "error"
                          ],
                          "default": "error"
                        },
                        "error": {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "default": "bad-request"
                            },
                            "message": {
                              "type": "string",
                              "default": "Bad request."
                            },
                            "statusCode": {
                              "type": "number",
                              "default": 400
                            },
                            "details": {
                              "type": "object",
                              "properties": {
                                "reason": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "reason"
                              ],
                              "example": {
                                "reason": "You have already confirmed your email address."
                              }
                            }
                          }
                        }
                      },
                      "required": [
                        "status",
                        "error"
                      ]
                    }
                  ]
                }
              }
            }
          },
          "403": {
            "description": "User status policy failed",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ErrorResponseApiModel"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "error"
                          ],
                          "default": "error"
                        },
                        "error": {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "enum": [
                                "access-control.authorization.blocked",
                                "access-control.authorization.forbidden"
                              ]
                            },
                            "message": {
                              "type": "string",
                              "default": "Forbidden."
                            },
                            "statusCode": {
                              "type": "number",
                              "enum": [
                                403
                              ]
                            },
                            "details": {
                              "oneOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "reason": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "reason"
                                  ]
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "reason": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "reason"
                                  ]
                                }
                              ]
                            }
                          },
                          "required": [
                            "type",
                            "statusCode"
                          ]
                        }
                      },
                      "required": [
                        "status",
                        "error"
                      ]
                    }
                  ]
                },
                "examples": {
                  "access-control.authorization.blocked_1": {
                    "summary": "User account is blocked",
                    "value": {
                      "status": "error",
                      "error": {
                        "type": "access-control.authorization.blocked",
                        "message": "Authorization failed",
                        "statusCode": 403,
                        "details": {
                          "reason": "Your account has been blocked. Please contact support."
                        }
                      }
                    }
                  },
                  "access-control.authorization.forbidden_2": {
                    "summary": "Forbidden resource (fallback)",
                    "value": {
                      "status": "error",
                      "error": {
                        "type": "access-control.authorization.forbidden",
                        "message": "Authorization failed",
                        "statusCode": 403,
                        "details": {
                          "reason": "Access denied. Please contact support."
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ErrorResponseApiModel"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "error"
                          ],
                          "default": "error"
                        },
                        "error": {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "default": "app.entity-not-found"
                            },
                            "message": {
                              "type": "string",
                              "default": "Entity not found."
                            },
                            "statusCode": {
                              "type": "number",
                              "default": 404
                            },
                            "details": {
                              "type": "object",
                              "properties": {
                                "entityType": {
                                  "type": "string"
                                },
                                "identity": {
                                  "type": "object",
                                  "additionalProperties": {
                                    "nullable": true,
                                    "oneOf": [
                                      {
                                        "type": "object",
                                        "title": "Object",
                                        "description": "Any JSON",
                                        "additionalProperties": true
                                      },
                                      {
                                        "type": "array",
                                        "items": {},
                                        "title": "Array",
                                        "description": "Any array"
                                      },
                                      {
                                        "type": "string",
                                        "title": "String",
                                        "description": "Any string"
                                      },
                                      {
                                        "type": "number",
                                        "title": "Number",
                                        "description": "Any number"
                                      },
                                      {
                                        "type": "boolean",
                                        "title": "String",
                                        "description": "True or false"
                                      }
                                    ]
                                  }
                                }
                              },
                              "required": [
                                "entityType"
                              ],
                              "example": {
                                "entityType": "User",
                                "identity": {
                                  "id": "6wvHiPEGR5X3wTPtTkjEhS"
                                }
                              }
                            }
                          }
                        }
                      },
                      "required": [
                        "status",
                        "error"
                      ]
                    }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate limit",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ErrorResponseApiModel"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "error"
                          ],
                          "default": "error"
                        },
                        "error": {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "default": "rate-limit.mail"
                            },
                            "message": {
                              "type": "string",
                              "default": "Rate limit."
                            },
                            "statusCode": {
                              "type": "number",
                              "default": 429
                            },
                            "details": {
                              "type": "object",
                              "properties": {
                                "reason": {
                                  "type": "string"
                                },
                                "secondsLeft": {
                                  "type": "number"
                                }
                              },
                              "required": [
                                "reason",
                                "secondsLeft"
                              ],
                              "example": {
                                "reason": "You have exceeded the rate limit. Please try again in 10 seconds.",
                                "secondsLeft": 10
                              }
                            }
                          }
                        }
                      },
                      "required": [
                        "status",
                        "error"
                      ]
                    }
                  ]
                }
              }
            }
          },
          "500": {
            "description": "The confirmation email mail could not be sent",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ErrorResponseApiModel"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "error"
                          ],
                          "default": "error"
                        },
                        "error": {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "default": "internal"
                            },
                            "message": {
                              "type": "string",
                              "default": "Internal server error."
                            },
                            "statusCode": {
                              "type": "number",
                              "default": 500
                            },
                            "details": {
                              "type": "object",
                              "properties": {
                                "reason": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "reason"
                              ],
                              "example": {
                                "reason": "The confirmation email mail could not be sent."
                              }
                            }
                          }
                        }
                      },
                      "required": [
                        "status",
                        "error"
                      ]
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "Request email verification mail",
        "tags": [
          "Email verification"
        ]
      }
    },
    "/auth/email/verification/confirm": {
      "post": {
        "description": "Confirm email by OTP code",
        "operationId": "EmailVerificationController_confirmEmail",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConfirmOtpCodeDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Returns a success message to the authorized user; otherwise, returns the access token and creates a session for the user",
            "content": {
              "application/json": {
                "examples": {
                  "accessTokenResponse": {
                    "summary": "Access token",
                    "value": {
                      "status": "success",
                      "data": {
                        "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiO..."
                      }
                    }
                  },
                  "successMessageResponse": {
                    "summary": "Success message",
                    "value": {
                      "status": "success",
                      "data": {
                        "message": "The email has been successfully confirmed."
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "OTP code is not available or invalid",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ErrorResponseApiModel"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "error"
                          ],
                          "default": "error"
                        },
                        "error": {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "enum": [
                                "bad-request",
                                "bad-request"
                              ]
                            },
                            "message": {
                              "type": "string",
                              "default": "Bad request."
                            },
                            "statusCode": {
                              "type": "number",
                              "enum": [
                                400
                              ]
                            },
                            "details": {
                              "oneOf": [
                                {
                                  "type": "object",
                                  "additionalProperties": true
                                },
                                {
                                  "type": "object",
                                  "additionalProperties": true
                                }
                              ]
                            }
                          },
                          "required": [
                            "type",
                            "statusCode"
                          ]
                        }
                      },
                      "required": [
                        "status",
                        "error"
                      ]
                    }
                  ]
                },
                "examples": {
                  "bad-request_1": {
                    "summary": "OTP code is not available",
                    "value": {
                      "status": "error",
                      "error": {
                        "type": "bad-request",
                        "message": "Bad request.",
                        "statusCode": 400,
                        "details": {
                          "reason": "OTP code is not available."
                        }
                      }
                    }
                  },
                  "bad-request_2": {
                    "summary": "OTP code is invalid",
                    "value": {
                      "status": "error",
                      "error": {
                        "type": "bad-request",
                        "message": "Bad request.",
                        "statusCode": 400,
                        "details": {
                          "reason": "Invalid OTP code."
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "User status policy failed",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ErrorResponseApiModel"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "error"
                          ],
                          "default": "error"
                        },
                        "error": {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "enum": [
                                "access-control.authorization.blocked",
                                "access-control.authorization.forbidden"
                              ]
                            },
                            "message": {
                              "type": "string",
                              "default": "Forbidden."
                            },
                            "statusCode": {
                              "type": "number",
                              "enum": [
                                403
                              ]
                            },
                            "details": {
                              "oneOf": [
                                {
                                  "type": "object",
                                  "properties": {
                                    "reason": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "reason"
                                  ]
                                },
                                {
                                  "type": "object",
                                  "properties": {
                                    "reason": {
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "reason"
                                  ]
                                }
                              ]
                            }
                          },
                          "required": [
                            "type",
                            "statusCode"
                          ]
                        }
                      },
                      "required": [
                        "status",
                        "error"
                      ]
                    }
                  ]
                },
                "examples": {
                  "access-control.authorization.blocked_1": {
                    "summary": "User account is blocked",
                    "value": {
                      "status": "error",
                      "error": {
                        "type": "access-control.authorization.blocked",
                        "message": "Authorization failed",
                        "statusCode": 403,
                        "details": {
                          "reason": "Your account has been blocked. Please contact support."
                        }
                      }
                    }
                  },
                  "access-control.authorization.forbidden_2": {
                    "summary": "Forbidden resource (fallback)",
                    "value": {
                      "status": "error",
                      "error": {
                        "type": "access-control.authorization.forbidden",
                        "message": "Authorization failed",
                        "statusCode": 403,
                        "details": {
                          "reason": "Access denied. Please contact support."
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "User or OTP code not found",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ErrorResponseApiModel"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "error"
                          ],
                          "default": "error"
                        },
                        "error": {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "enum": [
                                "app.entity-not-found",
                                "app.entity-not-found"
                              ]
                            },
                            "message": {
                              "type": "string",
                              "default": "Not found."
                            },
                            "statusCode": {
                              "type": "number",
                              "enum": [
                                404
                              ]
                            },
                            "details": {
                              "oneOf": [
                                {
                                  "type": "object",
                                  "additionalProperties": true
                                },
                                {
                                  "type": "object",
                                  "additionalProperties": true
                                }
                              ]
                            }
                          },
                          "required": [
                            "type",
                            "statusCode"
                          ]
                        }
                      },
                      "required": [
                        "status",
                        "error"
                      ]
                    }
                  ]
                },
                "examples": {
                  "app.entity-not-found_1": {
                    "summary": "User not found",
                    "value": {
                      "status": "error",
                      "error": {
                        "type": "app.entity-not-found",
                        "message": "Entity not found.",
                        "statusCode": 404,
                        "details": {
                          "entityType": "User",
                          "identity": {
                            "id": "6wvHiPEGR5X3wTPtTkjEhS"
                          }
                        }
                      }
                    }
                  },
                  "app.entity-not-found_2": {
                    "summary": "OTP code not found",
                    "value": {
                      "status": "error",
                      "error": {
                        "type": "app.entity-not-found",
                        "message": "Entity not found.",
                        "statusCode": 404,
                        "details": {
                          "entityType": "OTP",
                          "identity": {
                            "id": "6wvHiPEGR5X3wTPtTkjEhS"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "410": {
            "description": "OTP code is expired",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ErrorResponseApiModel"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "error"
                          ],
                          "default": "error"
                        },
                        "error": {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "default": "gone.otp-expired"
                            },
                            "message": {
                              "type": "string",
                              "default": "Gone."
                            },
                            "statusCode": {
                              "type": "number",
                              "default": 410
                            },
                            "details": {
                              "type": "object",
                              "properties": {
                                "reason": {
                                  "type": "string"
                                }
                              },
                              "required": [
                                "reason"
                              ],
                              "example": {
                                "reason": "OTP code is expired."
                              }
                            }
                          }
                        }
                      },
                      "required": [
                        "status",
                        "error"
                      ]
                    }
                  ]
                }
              }
            }
          },
          "429": {
            "description": "Rate limit",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ErrorResponseApiModel"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "error"
                          ],
                          "default": "error"
                        },
                        "error": {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "default": "rate-limit.otp"
                            },
                            "message": {
                              "type": "string",
                              "default": "Rate limit."
                            },
                            "statusCode": {
                              "type": "number",
                              "default": 429
                            },
                            "details": {
                              "type": "object",
                              "properties": {
                                "reason": {
                                  "type": "string"
                                },
                                "secondsLeft": {
                                  "type": "number"
                                }
                              },
                              "required": [
                                "reason",
                                "secondsLeft"
                              ],
                              "example": {
                                "reason": "You have exceeded the rate limit. Please try again in 10 seconds.",
                                "secondsLeft": 10
                              }
                            }
                          }
                        }
                      },
                      "required": [
                        "status",
                        "error"
                      ]
                    }
                  ]
                }
              }
            }
          }
        },
        "summary": "Confirm email",
        "tags": [
          "Email verification"
        ]
      }
    }
  },
  "info": {
    "title": "Food Friend API",
    "description": "API documentation for the Food Friend app",
    "version": "1.0.0",
    "contact": {}
  },
  "tags": [],
  "servers": [],
  "components": {
    "securitySchemes": {
      "Access token": {
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "type": "http",
        "name": "Authorization",
        "description": "Enter JWT token"
      }
    },
    "schemas": {
      "AccessTokenApiModel": {
        "type": "object",
        "properties": {
          "accessToken": {
            "type": "string",
            "description": "Access JWT token",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiO..."
          }
        },
        "required": [
          "accessToken"
        ]
      },
      "OtpTicketApiModel": {
        "type": "object",
        "properties": {
          "ticket": {
            "type": "string",
            "description": "OTP Ticket",
            "example": "LnT8BAUhhoJ2Y6MuB9AAZp"
          }
        },
        "required": [
          "ticket"
        ]
      },
      "AuthValidationDetailsApiModel": {
        "type": "object",
        "properties": {
          "entries": {
            "type": "array",
            "description": "List of errors by fields",
            "example": [
              {
                "property": "email",
                "value": "invalid-mail@mailcom",
                "constraints": {
                  "isEmail": "Value must be an email."
                }
              },
              {
                "property": "password",
                "value": "Invalid-password",
                "constraints": {
                  "containsDigits": "Value must contains at least one digit."
                }
              }
            ]
          }
        },
        "required": [
          "entries"
        ]
      },
      "RegisterUserDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "User email",
            "example": "john.doe@mail.com"
          },
          "password": {
            "type": "string",
            "description": "User password",
            "example": "Test!234",
            "minLength": 8,
            "maxLength": 32
          },
          "firstName": {
            "type": "string",
            "description": "User first name",
            "example": "John"
          },
          "lastName": {
            "type": "string",
            "description": "User last name",
            "example": "Doe"
          }
        },
        "required": [
          "email",
          "password",
          "firstName",
          "lastName"
        ]
      },
      "HttpExceptionApiModel": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "description": "Exception type"
          },
          "statusCode": {
            "type": "number",
            "description": "HTTP status code"
          },
          "message": {
            "type": "string",
            "description": "Exception message"
          },
          "details": {
            "description": "Exception details",
            "oneOf": [
              {
                "type": "object",
                "title": "Object",
                "description": "Any JSON",
                "additionalProperties": true
              },
              {
                "type": "array",
                "items": {},
                "title": "Array",
                "description": "Any array"
              },
              {
                "type": "string",
                "title": "String",
                "description": "Any string"
              },
              {
                "type": "number",
                "title": "Number",
                "description": "Any number"
              },
              {
                "type": "boolean",
                "title": "String",
                "description": "True or false"
              }
            ],
            "nullable": true
          }
        },
        "required": [
          "type",
          "statusCode",
          "message",
          "details"
        ]
      },
      "ErrorResponseApiModel": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "description": "Response status",
            "enum": [
              "error"
            ]
          },
          "error": {
            "description": "Response error",
            "allOf": [
              {
                "$ref": "#/components/schemas/HttpExceptionApiModel"
              }
            ]
          }
        },
        "required": [
          "status",
          "error"
        ]
      },
      "LoginUserDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "User email",
            "example": "john.doe@mail.com"
          },
          "password": {
            "type": "string",
            "description": "User password",
            "example": "Test!234",
            "minLength": 8,
            "maxLength": 32
          }
        },
        "required": [
          "email",
          "password"
        ]
      },
      "ResetPasswordDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "User email",
            "example": "john.doe@mail.com"
          }
        },
        "required": [
          "email"
        ]
      },
      "ConfirmOtpCodeDto": {
        "type": "object",
        "properties": {
          "ticket": {
            "type": "string",
            "description": "OTP Ticket",
            "example": "LnT8BAUhhoJ2Y6MuB9AAZp"
          },
          "code": {
            "type": "string",
            "description": "OTP Code",
            "example": "451957"
          }
        },
        "required": [
          "ticket",
          "code"
        ]
      },
      "ResetPasswordCompleteDto": {
        "type": "object",
        "properties": {
          "ticket": {
            "type": "string",
            "description": "OTP Ticket",
            "example": "LnT8BAUhhoJ2Y6MuB9AAZp"
          },
          "newPassword": {
            "type": "string",
            "description": "User password",
            "example": "Temp!234",
            "minLength": 8,
            "maxLength": 32
          }
        },
        "required": [
          "ticket",
          "newPassword"
        ]
      },
      "SetPasswordDto": {
        "type": "object",
        "properties": {
          "password": {
            "type": "string",
            "description": "User password",
            "example": "Test!234",
            "minLength": 8,
            "maxLength": 32
          }
        },
        "required": [
          "password"
        ]
      },
      "ChangePasswordDto": {
        "type": "object",
        "properties": {
          "currentPassword": {
            "type": "string",
            "description": "User password",
            "example": "Current!2345",
            "minLength": 8,
            "maxLength": 32
          },
          "newPassword": {
            "type": "string",
            "description": "User password",
            "example": "New!2345",
            "minLength": 8,
            "maxLength": 32
          }
        },
        "required": [
          "currentPassword",
          "newPassword"
        ]
      },
      "SuccessMessageApiModel": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Success message",
            "example": "Success"
          }
        },
        "required": [
          "message"
        ]
      },
      "SendVerificationMailDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "User email",
            "example": "john.doe@mail.com"
          }
        },
        "required": [
          "email"
        ]
      },
      "SuccessResponseApiModel": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "description": "Response status",
            "enum": [
              "success"
            ]
          },
          "data": {
            "oneOf": [
              {
                "type": "object",
                "title": "Object",
                "description": "Any JSON",
                "additionalProperties": true
              },
              {
                "type": "array",
                "items": {},
                "title": "Array",
                "description": "Any array"
              },
              {
                "type": "string",
                "title": "String",
                "description": "Any string"
              },
              {
                "type": "number",
                "title": "Number",
                "description": "Any number"
              },
              {
                "type": "boolean",
                "title": "String",
                "description": "True or false"
              }
            ],
            "nullable": true,
            "description": "Response data"
          }
        },
        "required": [
          "status",
          "data"
        ]
      }
    }
  },
  "security": [
    {
      "Access token": []
    }
  ]
}